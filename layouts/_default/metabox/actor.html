{{- $showslug  := .Params.slug -}}
{{- $showtitle := .Params.title -}}

{{- $showdata := newScratch -}}

{{- range $.Page.Site.Data.filmography -}}
    {{- if and (eq $showslug .slug) (eq $showtitle .title) -}}
        {{- $showdata.Set "character" .character -}}
        {{- $showdata.Set "year" .dates -}}
        {{- $showdata.Set "chartype" .chartype -}}
        {{- $showdata.Set "rating" .rating -}}
        {{- $showdata.Set "genre" .genre -}}
        {{- $showdata.Set "station" .station -}}
        {{- $showdata.Set "seasons" .seasons -}}
        {{- $showdata.Set "episodes" .episodes -}}
        {{- $showdata.Set "notes" .notes -}}
        {{- $showdata.Set "jorjan" .jorjan -}}
        {{- $showdata.Set "watch" .watch -}}
        {{- $showdata.Set "unverified" .unverified -}}
    {{- end -}}
{{- end -}}

{{- $character := $showdata.Get "character" -}}
{{- $chartype := $showdata.Get "chartype" -}}
{{- $rating := $showdata.Get "rating" -}}
{{- $year := $showdata.Get "year" -}}
{{- $genre := $showdata.Get "genre" -}}
{{- $station := $showdata.Get "station" -}}
{{- $seasons := $showdata.Get "seasons" -}}
{{- $episodes := $showdata.Get "episodes" -}}
{{- $notes := $showdata.Get "notes" -}}
{{- $jorjan := $showdata.Get "jorjan" -}}
{{- $watch := $showdata.Get "watch" -}}
{{- $unverified := $showdata.Get "unverified" -}}
{{- $thumbnail := .Params.actorimage | default "/img/placeholder.png" -}}

<!-- Excerpt/Details -->
<div class="text-body-secondary">
    {{- if $unverified -}}{{- partial "unconfirmed.html" -}}{{- end -}}
    <div class="card bg-light-subtle">
        <div class="card-header">
            {{- if $character -}}
                <h4 class="card-title text-center">{{ $character }}</h4>
                {{- if $chartype -}}<h6 class="text-center"><small> ({{ $chartype }} character)</small></h6>{{- end -}}
            {{- end -}}
            {{- if ne $thumbnail "/img/placeholder.jpg" -}}
                {{- with resources.Get $thumbnail -}}
                    {{- $image := .Fill "250x250" -}}
                    {{- $thumbnail = $image.RelPermalink -}}
                {{- end -}}
            {{- end -}}
            <center><img src="{{ $thumbnail }}" class="img-thumbnail" alt="{{ $character }}"></center>
        </div>
            <ul class="list-group list-group-flush actor-list-group">
                {{- if $year -}}<li class="list-group-item list-group-item-light">{{- partial "assets/icon.html" (dict "icon" "fas calendar-day") -}} <strong>Airdates:</strong> {{ $year }}</li>{{- end -}}
                {{- if $genre -}}<li class="list-group-item list-group-item-light">{{- partial "assets/icon.html" (dict "icon" "fas masks-theater") -}} <strong>Genre:</strong> {{ $genre }}</li>{{- end -}}
                {{- if $station -}}<li class="list-group-item list-group-item-light">{{- partial "assets/icon.html" (dict "icon" "fas tv") -}} <strong>Network:</strong> {{ if .Params.website }}<a href="{{ .Params.website }}" target="_blank">{{ $station }}</a>{{- else -}}{{ $station }}{{ end }}</li>{{- end -}}
                {{- if .Params.imdb -}}<li class="list-group-item list-group-item-light"><a href="{{ .Params.imdb }}" target="_blank">{{- partial "assets/icon.html" (dict "icon" "fab imdb") -}} IMDb</a></li>{{- end -}}
                {{- if .Params.episodelist -}}<li class="list-group-item list-group-item-light">
                    <a href="/library/recaps/{{- .File.TranslationBaseName -}}/">{{- partial "assets/icon.html" (dict "icon" "fas table-list") -}} List of Appearances</a>
                    {{- if or $seasons $episodes}}
                        <br /><small>(
                            {{- if $seasons -}}{{ $seasons }} season{{- if gt $seasons "1" -}}s{{- end -}}{{- end -}}
                            {{- if $episodes -}}{{ $episodes }} episode{{- if gt $episodes "1" -}}s{{- end -}}{{- end -}}
                        )</small>
                    {{- end -}}
                    {{- if $jorjan -}}<br /><small>[Credited as Jorjan Fox]</small>{{- end -}}
                    {{- if $notes -}}<br /><small>{{ $notes | safeHTML }}</small>{{- end -}}
                </li>{{- end -}}
                {{- if and ($rating) (ne $rating "fake") -}}
                    {{- .Page.Scratch.Set "goldstar" $rating -}}
                    <li class="list-group-item text-center list-group-item-light">{{- partial "rating.html" (dict "rating" $rating ) -}}</li>
                {{- end -}}
            </ul>
    </div>
</div>
